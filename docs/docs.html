<html>
<head>
  <title>Kanso - Documentation</title>
  <link rel="stylesheet" href="http://yandex.st/highlightjs/5.16/styles/github.min.css">
  <link rel="stylesheet" href="stylesheets/kanso.css" />
</head>
<body>
  <div id="topbar"></div>
  <div id="topbar_overlay"></div>
  <div id="container">

    <ul id="navigation">
      <li><a href="index.html">Intro</a></li>
      <li><a href="tutorial.html">Tutorial</a></li>
      <li><a class="selected" href="docs.html">Docs</a></li>
      <li><a href="https://github.com/caolan/kanso">Code &rArr;</a></li>
    </ul>

    <a id="sitename" href="index.html">
      <img src="images/kanso_ribbon.png" />
    </a>

    <!-- populated by javascript -->
    <ul id="sidenav"></ul>

    <div id="docs">
      <h1>Documentation</h1>


      <h2 id="configuration">Configuration</h2>
      <p>
        Project configuration options can be added to the <code>kanso.json</code>
        file in your project directory.
      </p>
      <ul>
        <li><strong>name</strong> (String) - the name of the design document</li>
        <li><strong>load</strong> (String) - the module to get design doc properties from</li>
        <li><strong>modules</strong> (String/Array) - files and directories to load as commonjs modules</li>
        <li><strong>templates</strong> (String) - templates directory to load templates from</li>
        <li><strong>attachments</strong> (String/Array) - files and directories to load as attachments</li>
      </ul>
      <h3>Example config</h3>
    <pre><code class="javascript">{
    "name": "myblog",
    "load": "lib/app",
    "modules": "lib",
    "templates": "templates",
    "attachments": "static"
}</code></pre>

      <h2 id="app_format">App format</h2>
      <p>
        The format of the loaded module (usually lib/app.js, depending on the "load"
        setting in kanso.json) follows the format of a CouchDB design doc. Any
        exported property of this module will be added to the design doc generated
        for your app.
      </p>
      <p>
        Kanso will occasionally extend the default design doc API by adding some
        additional properties which have a special meaning.
      </p>
      <h3 id="app_format_init">Init</h3>
      <p>
        The 'init' property is expected to be a function, and will be called on the
        initial page load, once the document is ready and the commonjs environment is
        available.
      </p>
      <p>
        This property is optional and can be safely omitted. If you want to
        progressively enhance a fallback page returned by CouchDB on the first hit,
        or initialize some application state, this is the place to do it.
      </p>
      <pre><code class="javascript">exports.init = function () {
    alert('initializing app');
};</code></pre>
      <h3 id="app_format_types">Types</h3>
      <p>
        The 'types' property is used by the admin app to find types to show in the
        applications types list. It is also assumed to be the location of any
        custom types by the skeleton app's validation function.
      </p>
      <p>
        It's a good idea to export your type definitions on this property to make
        them easy to re-use and compatible with the admin app.
      </p>
      <pre><code class="javascript">exports.types = {
    example: new Type('example', {
        fields: {
            title: fields.string(),
            message: fields.string()
        }
    })
};</code></pre>
      <h3 id="app_format_sessionChange">SessionChange</h3>
      <p>
        The 'sessionChange' property is expected to be a function and is called
        whenever a change to the user's session is detected (usually after calling
        login or logout from the session module).
      </p>

      <h2 id="modules">Modules</h2>

      <h3 id="cookies">Cookies</h3>
      <p>Functions related to the reading and manipulation of cookies.</p>

      <h4 id="cookies_readBrowserCookies">
        cookies.readBrowserCookies()
      </h4>
      <p>
        Read cookies currently stored in the browser, returning an object
        keyed by cookie name.
      </p>
      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="cookies_readBrowserCookie">
        cookies.readBrowserCookie(name)
      </h4>
      <p>
        Reads browser cookies and returned the value of the named cookie.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>name</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="cookies_cookieString">
        cookies.cookieString(req, opt)
      </h4>
      <p>
        Creates a string for storing a cookie on the browser.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Request Object</td>
          </tr>
          <tr>
            <th>opt</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="cookies_setBrowserCookie">
        cookies.setBrowserCookie(req, opt)
      </h4>
      <p>
        Sets a cookie on the browser, for use client-side only.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Request Object</td>
          </tr>
          <tr>
            <th>opt</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <h4 id="cookies_setResponseCookie">
        cookies.setResponseCookie(req, res, opt)
      </h4>
      <p>
        Creates a Set-Cookie header on a response object.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Request Object</td>
          </tr>
          <tr>
            <th>res</th>
            <td class="type">Response Object</td>
          </tr>
          <tr>
            <th>opt</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>


      <h3 id="core">Core</h3>
      <p>
        The core module contains functions used by kanso to facilitate the running
        of your app. You shouldn't need to use any of the functions here directly
        unless you're messing with the internals of Kanso.
      </p>

      <h4 id="core_init">
        <a href="#core_init">core.init()</a>
      </h4>
      <p>
        Called by kanso.js once the design doc has been loaded.
        You should not need to call this directly.
      </p>

      <h4 id="core_rewriteGroups">
        <a href="#core_rewriteGroups">core.rewriteGroups(pattern, url)</a>
      </h4>
      <p>Extracts groups from a url, eg:</p>
      <pre>'/some/path' with pattern '/some/:name' -&gt; {name: 'path'}</pre>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>pattern</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="core_rewriteSplat">core.rewriteSplat(pattern, url)</h4>
      <p>Extracts a splat value from a rewrite pattern and matching URL.</p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>pattern</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="core_matchURL">core.matchURL(method, url)</h4>
      <p>
        Attempts to match rewrite from patterns to a URL, returning the
        matching rewrite object if successful.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>method</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="core_replaceGroups">core.replaceGroups(val, groups, splat)</h4>
      <p>
        Replace group names and splats in a string with the value of that group
        or splat, eg:
      </p>
      <pre>"/:name" with groups {name: 'test'} -&gt; "/test"</pre>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>val</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>groups</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>splat</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="core_createRequest">
        core.createRequest(method, url, data, match, callback)
      </h4>
      <p>
        Creates a new request object from a url and matching rewrite object.
        Query parameters are automatically populated from rewrite pattern.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>method</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>data</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>match</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns via callback:</strong> Request Object</div>

      <h4 id="core_runShowBrowser">
        core.runShowBrowser(req, name, docid, callback)
      </h4>
      <p>
        Fetches the relevant document and calls the named show function.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>name</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>docid</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="core_runUpdateBrowser">
        core.runUpdateBrowser(req, name, docid, callback)
      </h4>
      <p>
        Fetches the relevant document and calls the named update function.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>name</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>docid</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="core_createHead">core.createHead(data)</h4>
      <p>
        Creates a fake head object from view results for passing to a list function
        being run client-side.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>data</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="core_runListBrowser">
        core.runListBrowser(req, name, view, callback)
      </h4>
      <p>
        Fetches the relevant view and calls the named list function with the results.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>name</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>view</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="core_handle">
        core.handle(method, url, data)
      </h4>
      <p>
        Creates a request object for the url and runs appropriate show, list or
        update functions.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>method</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>data</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <h4 id="core_setURL">
        core.setURL(method, url, data, hash)
      </h4>
      <p>
        Add a history entry for the given url, prefixed with the baseURL for the app.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>method</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>data</th>
            <td class="type">Object</td>
            <td class="description">(Optional)</td>
          </tr>
          <tr>
            <th>hash</th>
            <td class="type">String</td>
            <td class="description">(Optional)</td>
          </tr>
        </tbody>
      </table>

      <h4 id="core_getURL">
        core.getURL()
      </h4>
      <p>
        Gets the current app-level URL (without baseURL prefix).
      </p>
      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="core_sameOrigin">
        core.sameOrigin(a, b)
      </h4>
      <p>
        Tests is two urls are of the same origin. Accepts parsed url objects
        or strings as arguments.
      </p>
      <div class="returns"><strong>Returns:</strong> Boolean</div>

      <h4 id="core_appPath">
        core.appPath(p)
      </h4>
      <p>
        Converts a full url to an app-level url (without baseURL prefix).
        example: {baseURL}/some/path -&gt; /some/path
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>p</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>
      <div class="returns"><strong>Returns:</strong> String</div>

      <h4 id="core_isAppURL">
        core.isAppURL(url)
      </h4>
      <p>
        Used to decide whether to handle a link or not. Should detect app vs.
        external urls.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>url</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Boolean</div>



      <h3 id="db">DB</h3>
      <p>Contains functions for querying and storing data in CouchDB.</p>

      <h4 id="db_request">
        db.request(options, callback)
      </h4>
      <p>
        Make a request, with some default settings and proper callback
        handling. Used behind-the-scenes by most other DB module functions.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_getDoc">
        db.getDoc(id, q, callback)
      </h4>
      <p>
        Fetches a document from the database the app is running on. Results are
        passed to the callback, with the first argument of the callback reserved
        for any exceptions that occurred (node.js style).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>id</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>q</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_saveDoc">
        db.saveDoc(doc, callback)
      </h4>
      <p>
        Saves a document to the database the app is running on. Results are
        passed to the callback, with the first argument of the callback reserved
        for any exceptions that occurred (node.js style).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>doc</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_removeDoc">
        db.removeDoc(doc, callback)
      </h4>
      <p>
        Deletes a document from the database the app is running on. Results are
        passed to the callback, with the first argument of the callback reserved
        for any exceptions that occurred (node.js style).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>doc</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_getView">
        db.getView(view, q, callback)
      </h4>
      <p>
        Fetches a view from the database the app is running on. Results are
        passed to the callback, with the first argument of the callback reserved
        for any exceptions that occurred (node.js style).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>view</th>
            <td class="type">String</td>
          </tr>
          <tr>
            <th>q</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_all">
        db.all(q, callback)
      </h4>
      <p>
        Get all documents (including design docs).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>q</th>
            <td class="type">Object</td>
            <td class="description">(Optional</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h4 id="db_stringifyQuery">
        db.stringifyQuery(query)
      </h4>
      <p>
        Properly encodes query parameters to CouchDB views etc. Handle complex
        keys and other non-string parameters by passing through JSON.stringify.
        Returns a shallow-copied clone of the original query after complex values
        have been stringified.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>query</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="db_newUUID">
        db.newUUID(cacheNum, callback)
      </h4>
      <p>
        Returns a new UUID generated by CouchDB. Its possible to cache
        multiple UUIDs for later use, to avoid making too many requests.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>cacheNum</th>
            <td class="type">Number</td>
            <td class="description">(Optional) Default: 1</td>
          </tr>
          <tr>
            <th>callback</th>
            <td class="type">Function</td>
          </tr>
        </tbody>
      </table>

      <h3 id="fields">Fields</h3>
      <p>
        The building blocks of Types and Forms, Fields help to validate and authorize
        changes to docuemnt values.
      </p>

      <h4 id="fields_Field">
        forms.Field(options)
      </h4>
      <p>
        Field objects are used when constructing content types and forms.
      </p>
      <div class="constructor">Constructor</div>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">see below for available properties</td>
          </tr>
        </tbody>
      </table>

      <h5>Options:</h5>
      <table class="options">
        <tbody>
          <tr>
            <th>omit_empty</th>
            <td class="type">Boolean</td>
            <td class="description">Whether to omit the field from a document when the field is empty</td>
          </tr>
          <tr>
            <th>permissions</th>
            <td class="type">Object</td>
            <td class="description">A permissions check function or an object containing separate functions to run on create, edit and update operations.</td>
          </tr>
          <tr>
            <th>validators</th>
            <td class="type">Array</td>
            <td class="description">An array of validation functions (default: [])</td>
          </tr>
          <tr>
            <th>required</th>
            <td class="type">Boolean</td>
            <td class="description">Whether the field is required (default: true)</td>
          </td>
        </tbody>
      </table>
      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_Field">
        Field.parse(raw)
      </h4>
      <p>
        Parses a raw value returning the correct JavaScript type for this field.
        This will usually be overridden by other field types.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>raw</th>
          </tr>
        </tbody>
      </table>

      <h4 id="fields_Field_isEmpty">
        Field.isEmpty(value, raw)
      </h4>
      <p>
        Test values to see if field is considered empty.
      </p>
      <p>
        This function accepts the raw value even though by default it only
        checks the parsed value, so that other field types overridding this method
        have the raw data available.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>value</th>
            <td class="description">The parsed value for the field</td>
          </tr>
          <tr>
            <th>raw</th>
            <td class="description">The raw value for the field</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Boolean</div>

      <h4 id="fields_Field_validate">
        Field.validate(doc, value, raw)
      </h4>
      <p>
        Run the field's validation functions against a value. Returns an
        array of validation errors, or an empty array if valid.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>doc</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>value</th>
          </tr>
          <tr>
            <th>raw</th>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="fields_Field_authorize">
        Field.authorize(newDoc, oldDoc, newVal, oldVal, userCtx)
      </h4>
      <p>
        Check relevant field permissions to see if user is authorised to make
        changes. Returns an array of permissions errors, or an empty array if the
        changes are permissible.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>newDoc</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>oldDoc</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>newVal</th>
          </tr>
          <tr>
            <th>oldVal</th>
          </tr>
          <tr>
            <th>userCtx</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="fields_Embedded">
        fields.Embedded(options)
      </h4>
      <p>
        Embedded objects represent a Type embedded within another Type or set of
        Fields. Its not a true field, but like the Field constructor it acts as a
        marker when walking through the sub-objects that make up a schema.
      </p>
      <p>
        Exposes the same methods as Field objects.
      </p>

      <div class="constructor">Constructor</div>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See below for available properties</td>
          </tr>
        </tbody>
      </table>

      <h5>Options:</h5>
      <table class="options">
        <tbody>
          <tr>
            <th>type</th>
            <td class="type">Type Object</td>
            <td class="description"><strong>Required</strong>, the Type definition to embed</td>
          </tr>
          <tr>
            <th>omit_empty</th>
            <td class="type">Boolean</td>
            <td class="description">Whether to omit the field from a document when the field is empty</td>
          </tr>
          <tr>
            <th>permissions</th>
            <td class="type">Object</td>
            <td class="description">A permissions check function or an object containing separate functions to run on create, edit and update operations.</td>
          </tr>
          <tr>
            <th>validators</th>
            <td class="type">Array</td>
            <td class="description">An array of validation functions (default: [])</td>
          </tr>
          <tr>
            <th>required</th>
            <td class="type">Boolean</td>
            <td class="description">Whether the field is required (default: true)</td>
          </td>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Embedded Object</div>

      <h4 id="fields_EmbeddedList">
        fields.EmbeddedList(options)
      </h4>
      <p>
        EmbeddedList objects represent multiple instances of a Type embedded within
        another Type or set of Fields. Its not a true field, but like the Field
        constructor it acts as a marker when walking through the sub-objects that
        make up a schema.
      </p>
      <p>
        Exposes the same methods as Field objects.
      </p>

      <div class="constructor">Constructor</div>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See below for available properties</td>
          </tr>
        </tbody>
      </table>

      <h5>Options:</h5>
      <table class="options">
        <tbody>
          <tr>
            <th>type</th>
            <td class="type">Type Object</td>
            <td class="description"><strong>Required</strong>, the Type definition to embed</td>
          </tr>
          <tr>
            <th>omit_empty</th>
            <td class="type">Boolean</td>
            <td class="description">Whether to omit the field from a document when the field is empty</td>
          </tr>
          <tr>
            <th>permissions</th>
            <td class="type">Object</td>
            <td class="description">A permissions check function or an object containing separate functions to run on create, edit and update operations.</td>
          </tr>
          <tr>
            <th>validators</th>
            <td class="type">Array</td>
            <td class="description">An array of validation functions (default: [])</td>
          </tr>
          <tr>
            <th>required</th>
            <td class="type">Boolean</td>
            <td class="description">Whether the field is required (default: true)</td>
          </td>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> EmbeddedList Object</div>

      <h4 id="fields_EmbeddedList_missingIDs">
        EmbeddedList.missingIDs(list)
      </h4>
      <p>
        Detects embedded documents with missing _id properties and returns an
        array of Error objects for each occurence. Returns an empty array if
        all documents have a populated _id property.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>list</th>
            <td class="type">Array</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="fields_EmbeddedList_duplicateIDs">
        EmbeddedList.duplicateIDs(list)
      </h4>
      <p>
        Detects embedded documents with duplicate _id properties and returns an
        array of Error objects for each occurence. Returns an empty array if
        all documents have a unique _id property.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>list</th>
            <td class="type">Array</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="fields_string">
        fields.string(options)
      </h4>
      <p>
        Creates a new string Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_number">
        fields.number(options)
      </h4>
      <p>
        Creates a new number Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_boolean">
        fields.boolean(options)
      </h4>
      <p>
        Creates a new boolean Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_url">
        fields.url(options)
      </h4>
      <p>
        Creates a new URL Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_email">
        fields.email(options)
      </h4>
      <p>
        Creates a new email Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_creator">
        fields.creator(options)
      </h4>
      <p>
        Creates a new creator Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_timestamp">
        fields.timestamp(options)
      </h4>
      <p>
        Creates a new timestamp Field
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_choice">
        fields.choice(options)
      </h4>
      <p>
        Creates a new choice Field
      </p>
      <p>
        <strong>Required option:</strong> values - an array of possible choices, each an array
        with the first item as the value and the second as its label.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_numberChoice">
        fields.numberChoice(options)
      </h4>
      <p>
        Creates a new numberChoice Field
      </p>
      <p>
        <strong>Required option:</strong> values - an array of possible choices, each an array
        with the first item as the value and the second as its label.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Field Object</div>

      <h4 id="fields_embed">
        fields.embed(options)
      </h4>
      <p>
        Creates a new Embedded Field
      </p>
      <p>
        <strong>Required option:</strong> type - the Type definition to embed
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Embedded Object</div>

      <h4 id="fields_embedList">
        fields.embedList(options)
      </h4>
      <p>
        Creates a new EmbeddedList Field
      </p>
      <p>
        <strong>Required option:</strong> type - the Type definition to embed
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>options</th>
            <td class="type">Object</td>
            <td class="description">See the Field constructor for available options</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> EmbeddedList Object</div>


      <h3 id="flashmessages">Flashmessages</h3>
      <p>
        Flash messages help you store state between requests, such as reporting a
        successful or failed operation after a redirect.
      </p>
      <p>
        The flash message implementation in this module handles both fallback couchdb
        mode, using cookies to persist state between requests, as well as supporting
        client-side operation, correctly handling new messages even inside the
        callbacks of async functions.
      </p>
      <p>
        Flash messages only persist for the next request or the next template render!
        That means 2 redirects without explicitly currying the flash messages will
        cause the messages to be lost.
      </p>

      <h4 id="flashmessages_readRequestCookie">
        flashmessages.readRequestCookie(req)
      </h4>
      <p>
        Reads the flash messages cookie from a request object, returning an
        array of incoming messages.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="flashmessages_readBrowserCookie">
        flashmessages.readBrowserCookie()
      </h4>
      <p>
        Reads the flash messages cookie from the browser, returning an
        array of incoming messages.
      </p>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="flashmessages_updateRequest">
        flashmessages.updateRequest(req)
      </h4>
      <p>
        Adds a flash_messages property to a request containing all incoming
        messages.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Request Object</div>

      <h4 id="flashmessages_getMessages">
        flashmessages.getMessages(req)
      </h4>
      <p>
        Get's all current flash messages, stopping them from being outgoing on the
        next request so they're not repeated.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="flashmessages_getOutgoingMessages">
        flashmessage.getOutgoingMessages(req)
      </h4>
      <p>
        Filters all available messages on a request object, returning only those
        flagged as outgoing (sending in the response to be made available to the next
        request).
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Array</div>

      <h4 id="flashmessages_updateResponse">
        flashmessage.updateResponse(req, res)
      </h4>
      <p>
        Updates a response object after a list, show or update function has returned,
        setting the flash messages cookie to include the outgoing messages.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>res</th>
            <td class="type">Object</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Response Object</div>

      <h4 id="flashmessages_createMessage">
        flashmessages.createMessage(req, msg)
      </h4>
      <p>
        Creates a new flash message object, associating it with the given request.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>msg</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>

      <div class="returns"><strong>Returns:</strong> Object</div>

      <h4 id="flashmessages_setBrowserCookie">
        flashmessages.setBrowserCookie(req, messages)
      </h4>
      <p>
        Stores a list of messages in the flash messages cookie. This function is for
        client-side use.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>messages</th>
            <td class="type">Array</td>
          </tr>
        </tbody>
      </table>

      <h4 id="flashmessages_addMessage">
        flashmessages.addMessage(req, msg)
      </h4>
      <p>
        Adds a new flash message for the current request. If the list, show or update
        function has not returned, it's added to the response Set-Cookie header,
        otherwise (if its the result of a client-side async operation) it's added
        directly to the browsers cookies.
      </p>

      <h5>Parameters:</h5>
      <table class="params">
        <tbody>
          <tr>
            <th>req</th>
            <td class="type">Object</td>
          </tr>
          <tr>
            <th>msg</th>
            <td class="type">String</td>
          </tr>
        </tbody>
      </table>


      <h2 id="commands">Commands</h2>
      <p>
        Typing 'kanso' with no arguments will present you with a list of available
        commands. More information can be found by typing 'kanso help' optionally
        followed by the name of the command you need help with.
      </p>

      <h3 id="push">Push</h3>
      <p>Upload a project to a CouchDB instance.</p>
      <pre>kanso push [OPTIONS] DB [PATH]

  Parameters:
    DB     The CouchDB instance to upload the app to
    PATH   The project path to load the app from

  Options:
    --minify               Compress CommonJS modules using UglifyJS
    --minify-attachments   Compress .js attachments
    --baseURL PATH         Force the baseURL to a specific value.
                           (allows vhosts on CouchDB &lt; v1.1.x)
  </pre>

      <h3 id="pushdata">Pushdata</h3>
      <p>Push a file or directory of JSON files to DB.</p>
      <pre>kanso pushdata [OPTIONS] DB PATH

  Parameters:
    DB     The CouchDB instance to upload the documents to
    PATH   A file or directory containing JSON documents to upload

  Options:
    -f, --force      Ignore document conflict errors and upload anyway
  </pre>

      <h3 id="pushadmin">Pushadmin</h3>
      <p>Upload the kanso admin app to a CouchDB instance.</p>
      <pre>kanso pushadmin [OPTIONS] DB

Parameters:
  DB     The CouchDB instance to upload the app to

Options:
  --minify               Compress CommonJS modules using UglifyJS
  --minify-attachments   Compress .js attachments
  --baseURL PATH         Force the baseURL to a specific value.
                         (allows vhosts on CouchDB < v1.1.x)
</pre>

      <h3 id="create">Create</h3>
      <p>Create a new project skeleton.</p>
      <pre>kanso create PATH

  Parameters:
    PATH     Path to create a new project skeleton at, project name
             defaults to last directory in this path
  </pre>

      <h3 id="help">Help</h3>
      <p>Show help specific to a command.</p>
      <pre>kanso help [COMMAND]

  Parameters:
    COMMAND      The kanso command to show help on
  </pre>

      <h3 id="show">Show</h3>
      <p>Load a project and output resulting JSON</p>
      <pre>kanso show [PATH]

  Parameters:
    PATH     Path to project directory to show (defaults to ".")
  </pre>

      <h3 id="uuids">UUIDs</h3>
      <p>Returns UUIDs generated by a CouchDB instance.<p>
      <pre>kanso uuids [OPTIONS] [URL]

  Parameters:
    URL         The CouchDB instance to generate UUIDs from
                (defaults to http://localhost:5984)

  Options:
    -n [NUM], --number [NUM]    The number of UUIDs to generate (default: 1)
  </pre>

    </div>
  </div>

  <script src="http://yandex.st/highlightjs/5.16/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script src="javascript/docs.js"></script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20477836-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</body>
</html>
